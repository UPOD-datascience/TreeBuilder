<!DOCTYPE html>
<html lang="en">
<head>
    <!-- TODO: add layer indicators-->
    <!-- TODO: add target names to probas-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rotated Decision Tree Visualization</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        #tree-container {
            width: 100%;
            height: 100%;
        }
        #explainer {
            position: absolute;
            top: 5%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            font-weight: bold;
            text-align: center;
        }
        .node circle {
            stroke-width: 2px;
        }
        .node text {
            font: 12px sans-serif;
        }
        .link {
            fill: none;
            stroke: #ccc;
            stroke-width: 1px;
        }
        .tooltip {
            position: absolute;
            text-align: center;
            padding: 8px;
            font: 12px sans-serif;
            background: lightsteelblue;
            border: 0px;
            border-radius: 8px;
            pointer-events: none;
            width: 450px;
        }
        .tooltip-row {
          display: flex;
          justify-content: space-between;
          margin-bottom: 5px;
        }
        .tooltip-label {
          margin-right: 10px;
        }
        .tooltip-table {
          width: 100%;
          display: table;
          border-collapse: collapse;
          table-layout: fixed;
        }
        .tooltip-table-row {
          display: table-row;
        }
        .tooltip-table-cell {
          display: table-cell;
          padding: 5px;
          border: 1px solid #ddd;
          text-align: center;
          vertical-align: middle;
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        }

        .tooltip-table-row.header {
          font-weight: bold;
          background-color: #f2f2f2;
        }


        #fit-button, #unfold-all-button, #collapse-button {
            position: absolute;
            top: 10px;
            z-index: 1000;
        }
        #fit-button {
            left: 10px;
        }
        #unfold-all-button {
            left: 120px;
        }
        #collapse-button {
            left: 220px;
        }
    </style>
</head>
<body>
    <button id="fit-button">Fit to Screen</button>
    <button id="unfold-all-button">Unfold All</button>
    <button id="collapse-button">Collapse Nodes</button>

    <div id="explainer"><== True | False ==></div>
    <div id="tree-container"></div>

    <script>
        // The treeData variable will be defined here by the Python script
        const treeData = {"root": {"name": "root-node", "feature": "QRS_duration mean", "condition": "greater_than_or_equal", "threshold": 110, "class_counts": [92, 80, 75, 104, 324], "samples": 675, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.1362962962962963, 0.11851851851851852, 0.1111111111111111, 0.15407407407407409, 0.48], "coverage": [1.0, 1.0, 1.0, 1.0, 1.0], "is_custom": true, "ignore_after": [], "features_to_use_next": [], "children": [{"name": "root-child-1", "feature": "QRS_duration mean", "condition": "greater_than_or_equal", "threshold": 120, "class_counts": [82, 20, 66, 98, 12], "samples": 278, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.2949640287769784, 0.07194244604316546, 0.23741007194244604, 0.35251798561151076, 0.04316546762589928], "coverage": [0.8913043478260869, 0.25, 0.88, 0.9423076923076923, 0.037037037037037035], "is_custom": true, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": [], "children": [{"name": "left_child", "feature": "p_vector mean lead_5", "condition": "less_than_or_equal", "threshold": 0.11499999836087227, "class_counts": [73, 7, 58, 87, 2], "samples": 227, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.32158590308370044, 0.030837004405286344, 0.2555066079295154, 0.3832599118942731, 0.00881057268722467], "coverage": [0.7934782608695652, 0.0875, 0.7733333333333333, 0.8365384615384616, 0.006172839506172839], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": [], "children": [{"name": "left_child", "feature": "qrs_vector mean lead_5", "condition": "less_than_or_equal", "threshold": -0.7450000047683716, "class_counts": [73, 4, 56, 82, 0], "samples": 215, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.3395348837209302, 0.018604651162790697, 0.26046511627906976, 0.3813953488372093, 0.0], "coverage": [0.7934782608695652, 0.05, 0.7466666666666667, 0.7884615384615384, 0.0], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": [], "children": [{"name": "left_child", "feature": "qrs_ampl mean lead_7", "condition": "less_than_or_equal", "threshold": 1.2350000143051147, "class_counts": [2, 0, 43, 2, 0], "samples": 47, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0425531914893617, 0.0, 0.9148936170212766, 0.0425531914893617, 0.0], "coverage": [0.021739130434782608, 0.0, 0.5733333333333334, 0.019230769230769232, 0.0], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": [], "children": [{"name": "left_child", "feature": "qrs_ampl mean lead_4", "condition": "less_than_or_equal", "threshold": 1.5099999904632568, "class_counts": [0, 0, 40, 2, 0], "samples": 42, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.0, 0.9523809523809523, 0.047619047619047616, 0.0], "coverage": [0.0, 0.0, 0.5333333333333333, 0.019230769230769232, 0.0], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": [], "children": [{"name": "left_child", "feature": null, "condition": null, "threshold": null, "class_counts": [0, 0, 35, 0, 0], "samples": 35, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.0, 1.0, 0.0, 0.0], "coverage": [0.0, 0.0, 0.4666666666666667, 0.0, 0.0], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": []}, {"name": "right_child", "feature": null, "condition": null, "threshold": null, "class_counts": [0, 0, 5, 2, 0], "samples": 7, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.0, 0.7142857142857143, 0.2857142857142857, 0.0], "coverage": [0.0, 0.0, 0.06666666666666667, 0.019230769230769232, 0.0], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": []}]}, {"name": "right_child", "feature": null, "condition": null, "threshold": null, "class_counts": [2, 0, 3, 0, 0], "samples": 5, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.4, 0.0, 0.6, 0.0, 0.0], "coverage": [0.021739130434782608, 0.0, 0.04, 0.0, 0.0], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": []}]}, {"name": "right_child", "feature": "qrs_vector mean lead_7", "condition": "less_than_or_equal", "threshold": -0.11499999836087227, "class_counts": [71, 4, 13, 80, 0], "samples": 168, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.4226190476190476, 0.023809523809523808, 0.07738095238095238, 0.47619047619047616, 0.0], "coverage": [0.7717391304347826, 0.05, 0.17333333333333334, 0.7692307692307693, 0.0], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": [], "children": [{"name": "left_child", "feature": "morphology lead_2_R", "condition": "less_than_or_equal", "threshold": 0.5, "class_counts": [10, 4, 9, 3, 0], "samples": 26, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.38461538461538464, 0.15384615384615385, 0.34615384615384615, 0.11538461538461539, 0.0], "coverage": [0.10869565217391304, 0.05, 0.12, 0.028846153846153848, 0.0], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": [], "children": [{"name": "left_child", "feature": null, "condition": null, "threshold": null, "class_counts": [9, 4, 2, 3, 0], "samples": 18, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.5, 0.2222222222222222, 0.1111111111111111, 0.16666666666666666, 0.0], "coverage": [0.09782608695652174, 0.05, 0.02666666666666667, 0.028846153846153848, 0.0], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": []}, {"name": "right_child", "feature": null, "condition": null, "threshold": null, "class_counts": [1, 0, 7, 0, 0], "samples": 8, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.125, 0.0, 0.875, 0.0, 0.0], "coverage": [0.010869565217391304, 0.0, 0.09333333333333334, 0.0, 0.0], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": []}]}, {"name": "right_child", "feature": "qrs_vector mean lead_2", "condition": "less_than_or_equal", "threshold": 0.17500000447034836, "class_counts": [61, 0, 4, 77, 0], "samples": 142, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.4295774647887324, 0.0, 0.028169014084507043, 0.5422535211267606, 0.0], "coverage": [0.6630434782608695, 0.0, 0.05333333333333334, 0.7403846153846154, 0.0], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": [], "children": [{"name": "left_child", "feature": null, "condition": null, "threshold": null, "class_counts": [58, 0, 1, 74, 0], "samples": 133, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.43609022556390975, 0.0, 0.007518796992481203, 0.556390977443609, 0.0], "coverage": [0.6304347826086957, 0.0, 0.013333333333333334, 0.7115384615384616, 0.0], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": []}, {"name": "right_child", "feature": null, "condition": null, "threshold": null, "class_counts": [3, 0, 3, 3, 0], "samples": 9, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.3333333333333333, 0.0, 0.3333333333333333, 0.3333333333333333, 0.0], "coverage": [0.03260869565217391, 0.0, 0.04, 0.028846153846153848, 0.0], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": []}]}]}]}, {"name": "right_child", "feature": "qrs_vector mean lead_3", "condition": "less_than_or_equal", "threshold": 0.06000000424683094, "class_counts": [0, 3, 2, 5, 2], "samples": 12, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.25, 0.16666666666666666, 0.4166666666666667, 0.16666666666666666], "coverage": [0.0, 0.0375, 0.02666666666666667, 0.04807692307692308, 0.006172839506172839], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": [], "children": [{"name": "left_child", "feature": null, "condition": null, "threshold": null, "class_counts": [0, 0, 0, 5, 2], "samples": 7, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.0, 0.0, 0.7142857142857143, 0.2857142857142857], "coverage": [0.0, 0.0, 0.0, 0.04807692307692308, 0.006172839506172839], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": []}, {"name": "right_child", "feature": null, "condition": null, "threshold": null, "class_counts": [0, 3, 2, 0, 0], "samples": 5, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.6, 0.4, 0.0, 0.0], "coverage": [0.0, 0.0375, 0.02666666666666667, 0.0, 0.0], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": []}]}]}, {"name": "right_child", "feature": "qrs_vector mean lead_4", "condition": "less_than_or_equal", "threshold": 0.13500000163912773, "class_counts": [9, 13, 8, 11, 10], "samples": 51, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.17647058823529413, 0.2549019607843137, 0.1568627450980392, 0.21568627450980393, 0.19607843137254902], "coverage": [0.09782608695652174, 0.1625, 0.10666666666666667, 0.10576923076923077, 0.030864197530864196], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": [], "children": [{"name": "left_child", "feature": "t_vector mean lead_3", "condition": "less_than_or_equal", "threshold": 0.03499999921768904, "class_counts": [8, 12, 7, 1, 9], "samples": 37, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.21621621621621623, 0.32432432432432434, 0.1891891891891892, 0.02702702702702703, 0.24324324324324326], "coverage": [0.08695652173913043, 0.15, 0.09333333333333334, 0.009615384615384616, 0.027777777777777776], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": [], "children": [{"name": "left_child", "feature": "t_vector mean lead_6", "condition": "less_than_or_equal", "threshold": 0.22500000149011612, "class_counts": [7, 9, 7, 0, 9], "samples": 32, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.21875, 0.28125, 0.21875, 0.0, 0.28125], "coverage": [0.07608695652173914, 0.1125, 0.09333333333333334, 0.0, 0.027777777777777776], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": [], "children": [{"name": "left_child", "feature": "missingindicator_p_vector mean lead_7", "condition": "less_than_or_equal", "threshold": 0.5, "class_counts": [7, 9, 2, 0, 8], "samples": 26, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.2692307692307692, 0.34615384615384615, 0.07692307692307693, 0.0, 0.3076923076923077], "coverage": [0.07608695652173914, 0.1125, 0.02666666666666667, 0.0, 0.024691358024691357], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": [], "children": [{"name": "left_child", "feature": null, "condition": null, "threshold": null, "class_counts": [3, 9, 0, 0, 8], "samples": 20, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.15, 0.45, 0.0, 0.0, 0.4], "coverage": [0.03260869565217391, 0.1125, 0.0, 0.0, 0.024691358024691357], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": []}, {"name": "right_child", "feature": null, "condition": null, "threshold": null, "class_counts": [4, 0, 2, 0, 0], "samples": 6, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.6666666666666666, 0.0, 0.3333333333333333, 0.0, 0.0], "coverage": [0.043478260869565216, 0.0, 0.02666666666666667, 0.0, 0.0], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": []}]}, {"name": "right_child", "feature": null, "condition": null, "threshold": null, "class_counts": [0, 0, 5, 0, 1], "samples": 6, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.0, 0.8333333333333334, 0.0, 0.16666666666666666], "coverage": [0.0, 0.0, 0.06666666666666667, 0.0, 0.0030864197530864196], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": []}]}, {"name": "right_child", "feature": null, "condition": null, "threshold": null, "class_counts": [1, 3, 0, 1, 0], "samples": 5, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.2, 0.6, 0.0, 0.2, 0.0], "coverage": [0.010869565217391304, 0.0375, 0.0, 0.009615384615384616, 0.0], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": []}]}, {"name": "right_child", "feature": "qrs_vector mean lead_5", "condition": "less_than_or_equal", "threshold": 0.5499999821186066, "class_counts": [1, 1, 1, 10, 1], "samples": 14, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.07142857142857142, 0.07142857142857142, 0.07142857142857142, 0.7142857142857143, 0.07142857142857142], "coverage": [0.010869565217391304, 0.0125, 0.013333333333333334, 0.09615384615384616, 0.0030864197530864196], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": [], "children": [{"name": "left_child", "feature": null, "condition": null, "threshold": null, "class_counts": [0, 0, 0, 9, 0], "samples": 9, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.0, 0.0, 1.0, 0.0], "coverage": [0.0, 0.0, 0.0, 0.08653846153846154, 0.0], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": []}, {"name": "right_child", "feature": null, "condition": null, "threshold": null, "class_counts": [1, 1, 1, 1, 1], "samples": 5, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.2, 0.2, 0.2, 0.2, 0.2], "coverage": [0.010869565217391304, 0.0125, 0.013333333333333334, 0.009615384615384616, 0.0030864197530864196], "is_custom": false, "ignore_after": ["QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean"], "features_to_use_next": []}]}]}]}, {"name": "root-child-2", "feature": "qrs_vector mean lead_4", "condition": "less_than_or_equal", "threshold": -0.09705394133925438, "class_counts": [10, 60, 9, 6, 312], "samples": 397, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.02518891687657431, 0.15113350125944586, 0.022670025188916875, 0.015113350125944584, 0.7858942065491183], "coverage": [0.10869565217391304, 0.75, 0.12, 0.057692307692307696, 0.9629629629629629], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"], "children": [{"name": "left_child", "feature": "t_vector mean lead_1", "condition": "less_than_or_equal", "threshold": -0.2149999961256981, "class_counts": [2, 58, 7, 1, 156], "samples": 224, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.008928571428571428, 0.25892857142857145, 0.03125, 0.004464285714285714, 0.6964285714285714], "coverage": [0.021739130434782608, 0.725, 0.09333333333333334, 0.009615384615384616, 0.48148148148148145], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"], "children": [{"name": "left_child", "feature": null, "condition": null, "threshold": null, "class_counts": [0, 1, 0, 1, 3], "samples": 5, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.2, 0.0, 0.2, 0.6], "coverage": [0.0, 0.0125, 0.0, 0.009615384615384616, 0.009259259259259259], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"]}, {"name": "right_child", "feature": "p_vector mean lead_0", "condition": "less_than_or_equal", "threshold": -0.0002023584456765093, "class_counts": [2, 57, 7, 0, 153], "samples": 219, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0091324200913242, 0.2602739726027397, 0.0319634703196347, 0.0, 0.6986301369863014], "coverage": [0.021739130434782608, 0.7125, 0.09333333333333334, 0.0, 0.4722222222222222], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"], "children": [{"name": "left_child", "feature": "morphology lead_0_none", "condition": "less_than_or_equal", "threshold": 0.5, "class_counts": [2, 6, 2, 0, 24], "samples": 34, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.058823529411764705, 0.17647058823529413, 0.058823529411764705, 0.0, 0.7058823529411765], "coverage": [0.021739130434782608, 0.075, 0.02666666666666667, 0.0, 0.07407407407407407], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"], "children": [{"name": "left_child", "feature": "t_vector mean lead_6", "condition": "less_than_or_equal", "threshold": -0.014999999664723873, "class_counts": [2, 5, 0, 0, 20], "samples": 27, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.07407407407407407, 0.18518518518518517, 0.0, 0.0, 0.7407407407407407], "coverage": [0.021739130434782608, 0.0625, 0.0, 0.0, 0.06172839506172839], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"], "children": [{"name": "left_child", "feature": null, "condition": null, "threshold": null, "class_counts": [2, 0, 0, 0, 3], "samples": 5, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.4, 0.0, 0.0, 0.0, 0.6], "coverage": [0.021739130434782608, 0.0, 0.0, 0.0, 0.009259259259259259], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"]}, {"name": "right_child", "feature": null, "condition": null, "threshold": null, "class_counts": [0, 5, 0, 0, 17], "samples": 22, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.22727272727272727, 0.0, 0.0, 0.7727272727272727], "coverage": [0.0, 0.0625, 0.0, 0.0, 0.05246913580246913], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"]}]}, {"name": "right_child", "feature": null, "condition": null, "threshold": null, "class_counts": [0, 1, 2, 0, 4], "samples": 7, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.14285714285714285, 0.2857142857142857, 0.0, 0.5714285714285714], "coverage": [0.0, 0.0125, 0.02666666666666667, 0.0, 0.012345679012345678], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"]}]}, {"name": "right_child", "feature": "missingindicator_p_vector mean lead_4", "condition": "less_than_or_equal", "threshold": 0.5, "class_counts": [0, 51, 5, 0, 129], "samples": 185, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.2756756756756757, 0.02702702702702703, 0.0, 0.6972972972972973], "coverage": [0.0, 0.6375, 0.06666666666666667, 0.0, 0.39814814814814814], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"], "children": [{"name": "left_child", "feature": "p_vector mean lead_4", "condition": "less_than_or_equal", "threshold": -0.014999999664723873, "class_counts": [0, 43, 1, 0, 127], "samples": 171, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.25146198830409355, 0.005847953216374269, 0.0, 0.7426900584795322], "coverage": [0.0, 0.5375, 0.013333333333333334, 0.0, 0.39197530864197533], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"], "children": [{"name": "left_child", "feature": null, "condition": null, "threshold": null, "class_counts": [0, 3, 1, 0, 3], "samples": 7, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.42857142857142855, 0.14285714285714285, 0.0, 0.42857142857142855], "coverage": [0.0, 0.0375, 0.013333333333333334, 0.0, 0.009259259259259259], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"]}, {"name": "right_child", "feature": null, "condition": null, "threshold": null, "class_counts": [0, 40, 0, 0, 124], "samples": 164, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.24390243902439024, 0.0, 0.0, 0.7560975609756098], "coverage": [0.0, 0.5, 0.0, 0.0, 0.38271604938271603], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"]}]}, {"name": "right_child", "feature": "t_vector mean lead_4", "condition": "less_than_or_equal", "threshold": 0.06499999947845936, "class_counts": [0, 8, 4, 0, 2], "samples": 14, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.5714285714285714, 0.2857142857142857, 0.0, 0.14285714285714285], "coverage": [0.0, 0.1, 0.05333333333333334, 0.0, 0.006172839506172839], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"], "children": [{"name": "left_child", "feature": null, "condition": null, "threshold": null, "class_counts": [0, 5, 4, 0, 0], "samples": 9, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.5555555555555556, 0.4444444444444444, 0.0, 0.0], "coverage": [0.0, 0.0625, 0.05333333333333334, 0.0, 0.0], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"]}, {"name": "right_child", "feature": null, "condition": null, "threshold": null, "class_counts": [0, 3, 0, 0, 2], "samples": 5, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.6, 0.0, 0.0, 0.4], "coverage": [0.0, 0.0375, 0.0, 0.0, 0.006172839506172839], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"]}]}]}]}]}, {"name": "right_child", "feature": "t_vector mean lead_1", "condition": "less_than_or_equal", "threshold": -0.06499999947845936, "class_counts": [8, 2, 2, 5, 156], "samples": 173, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.046242774566473986, 0.011560693641618497, 0.011560693641618497, 0.028901734104046242, 0.9017341040462428], "coverage": [0.08695652173913043, 0.025, 0.02666666666666667, 0.04807692307692308, 0.48148148148148145], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"], "children": [{"name": "left_child", "feature": "qrs_vector mean lead_6", "condition": "less_than_or_equal", "threshold": 0.2849999964237213, "class_counts": [1, 0, 2, 0, 8], "samples": 11, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.09090909090909091, 0.0, 0.18181818181818182, 0.0, 0.7272727272727273], "coverage": [0.010869565217391304, 0.0, 0.02666666666666667, 0.0, 0.024691358024691357], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"], "children": [{"name": "left_child", "feature": null, "condition": null, "threshold": null, "class_counts": [1, 0, 0, 0, 5], "samples": 6, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.16666666666666666, 0.0, 0.0, 0.0, 0.8333333333333334], "coverage": [0.010869565217391304, 0.0, 0.0, 0.0, 0.015432098765432098], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"]}, {"name": "right_child", "feature": null, "condition": null, "threshold": null, "class_counts": [0, 0, 2, 0, 3], "samples": 5, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.0, 0.4, 0.0, 0.6], "coverage": [0.0, 0.0, 0.02666666666666667, 0.0, 0.009259259259259259], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"]}]}, {"name": "right_child", "feature": "morphology lead_7_R.S", "condition": "less_than_or_equal", "threshold": 0.5, "class_counts": [7, 2, 0, 5, 148], "samples": 162, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.043209876543209874, 0.012345679012345678, 0.0, 0.030864197530864196, 0.9135802469135802], "coverage": [0.07608695652173914, 0.025, 0.0, 0.04807692307692308, 0.4567901234567901], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"], "children": [{"name": "left_child", "feature": "qrs_vector mean lead_2", "condition": "less_than_or_equal", "threshold": 0.03499999921768904, "class_counts": [6, 0, 0, 4, 100], "samples": 110, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.05454545454545454, 0.0, 0.0, 0.03636363636363636, 0.9090909090909091], "coverage": [0.06521739130434782, 0.0, 0.0, 0.038461538461538464, 0.30864197530864196], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"], "children": [{"name": "left_child", "feature": "p_vector mean lead_5", "condition": "less_than_or_equal", "threshold": -0.014999999664723873, "class_counts": [1, 0, 0, 3, 94], "samples": 98, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.01020408163265306, 0.0, 0.0, 0.030612244897959183, 0.9591836734693877], "coverage": [0.010869565217391304, 0.0, 0.0, 0.028846153846153848, 0.29012345679012347], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"], "children": [{"name": "left_child", "feature": null, "condition": null, "threshold": null, "class_counts": [1, 0, 0, 0, 4], "samples": 5, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.2, 0.0, 0.0, 0.0, 0.8], "coverage": [0.010869565217391304, 0.0, 0.0, 0.0, 0.012345679012345678], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"]}, {"name": "right_child", "feature": null, "condition": null, "threshold": null, "class_counts": [0, 0, 0, 3, 90], "samples": 93, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.0, 0.0, 0.03225806451612903, 0.967741935483871], "coverage": [0.0, 0.0, 0.0, 0.028846153846153848, 0.2777777777777778], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"]}]}, {"name": "right_child", "feature": "t_vector mean lead_6", "condition": "less_than_or_equal", "threshold": -0.04499999899417162, "class_counts": [5, 0, 0, 1, 6], "samples": 12, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.4166666666666667, 0.0, 0.0, 0.08333333333333333, 0.5], "coverage": [0.05434782608695652, 0.0, 0.0, 0.009615384615384616, 0.018518518518518517], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"], "children": [{"name": "left_child", "feature": null, "condition": null, "threshold": null, "class_counts": [1, 0, 0, 0, 5], "samples": 6, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.16666666666666666, 0.0, 0.0, 0.0, 0.8333333333333334], "coverage": [0.010869565217391304, 0.0, 0.0, 0.0, 0.015432098765432098], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"]}, {"name": "right_child", "feature": null, "condition": null, "threshold": null, "class_counts": [4, 0, 0, 1, 1], "samples": 6, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.6666666666666666, 0.0, 0.0, 0.16666666666666666, 0.16666666666666666], "coverage": [0.043478260869565216, 0.0, 0.0, 0.009615384615384616, 0.0030864197530864196], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"]}]}]}, {"name": "right_child", "feature": "qrs_vector mean lead_0", "condition": "less_than_or_equal", "threshold": -0.06499999947845936, "class_counts": [1, 2, 0, 1, 48], "samples": 52, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.019230769230769232, 0.038461538461538464, 0.0, 0.019230769230769232, 0.9230769230769231], "coverage": [0.010869565217391304, 0.025, 0.0, 0.009615384615384616, 0.14814814814814814], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"], "children": [{"name": "left_child", "feature": null, "condition": null, "threshold": null, "class_counts": [1, 0, 0, 1, 3], "samples": 5, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.2, 0.0, 0.0, 0.2, 0.6], "coverage": [0.010869565217391304, 0.0, 0.0, 0.009615384615384616, 0.009259259259259259], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"]}, {"name": "right_child", "feature": "qrs_vector mean lead_2", "condition": "less_than_or_equal", "threshold": 0.004999999888241291, "class_counts": [0, 2, 0, 0, 45], "samples": 47, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.0425531914893617, 0.0, 0.0, 0.9574468085106383], "coverage": [0.0, 0.025, 0.0, 0.0, 0.1388888888888889], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"], "children": [{"name": "left_child", "feature": null, "condition": null, "threshold": null, "class_counts": [0, 0, 0, 0, 37], "samples": 37, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.0, 0.0, 0.0, 1.0], "coverage": [0.0, 0.0, 0.0, 0.0, 0.11419753086419752], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"]}, {"name": "right_child", "feature": null, "condition": null, "threshold": null, "class_counts": [0, 2, 0, 0, 8], "samples": 10, "targets": ["BF", "LAFB", "LBBB", "RBBB", "SR"], "probas": [0.0, 0.2, 0.0, 0.0, 0.8], "coverage": [0.0, 0.025, 0.0, 0.0, 0.024691358024691357], "is_custom": false, "ignore_after": [], "features_to_use_next": ["morphology lead_0", "morphology lead_1", "morphology lead_2", "morphology lead_3", "morphology lead_4", "morphology lead_5", "morphology lead_6", "morphology lead_7", "qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7"]}]}]}]}]}]}]}, "feature_names": ["qrs_vector mean lead_0", "p_vector mean lead_0", "t_vector mean lead_0", "qrs_ampl mean lead_0", "qrs_vector mean lead_1", "p_vector mean lead_1", "t_vector mean lead_1", "qrs_ampl mean lead_1", "qrs_vector mean lead_2", "p_vector mean lead_2", "t_vector mean lead_2", "qrs_ampl mean lead_2", "qrs_vector mean lead_3", "p_vector mean lead_3", "t_vector mean lead_3", "qrs_ampl mean lead_3", "qrs_vector mean lead_4", "p_vector mean lead_4", "t_vector mean lead_4", "qrs_ampl mean lead_4", "qrs_vector mean lead_5", "p_vector mean lead_5", "t_vector mean lead_5", "qrs_ampl mean lead_5", "qrs_vector mean lead_6", "p_vector mean lead_6", "t_vector mean lead_6", "qrs_ampl mean lead_6", "qrs_vector mean lead_7", "p_vector mean lead_7", "t_vector mean lead_7", "qrs_ampl mean lead_7", "QQ_intervals mean", "HRs mean", "PQ_duration mean", "QT_duration mean", "QTc_duration mean", "T_duration mean", "P_duration mean", "QRS_duration mean", "morphology lead_0_R", "morphology lead_0_R.S", "morphology lead_0_none", "morphology lead_0_infrequent_sklearn", "morphology lead_1_R.S", "morphology lead_1_infrequent_sklearn", "morphology lead_2_Q.R", "morphology lead_2_R", "morphology lead_2_infrequent_sklearn", "morphology lead_3_Q.R", "morphology lead_3_R", "morphology lead_3_infrequent_sklearn", "morphology lead_4_R.S", "morphology lead_4_infrequent_sklearn", "morphology lead_5_R.S", "morphology lead_5_infrequent_sklearn", "morphology lead_6_R.S", "morphology lead_6_S", "morphology lead_6_infrequent_sklearn", "morphology lead_7_Q.R", "morphology lead_7_R.S", "morphology lead_7_S", "morphology lead_7_infrequent_sklearn", "missingindicator_qrs_vector mean lead_0", "missingindicator_p_vector mean lead_0", "missingindicator_t_vector mean lead_0", "missingindicator_qrs_ampl mean lead_0", "missingindicator_qrs_vector mean lead_1", "missingindicator_p_vector mean lead_1", "missingindicator_t_vector mean lead_1", "missingindicator_qrs_ampl mean lead_1", "missingindicator_qrs_vector mean lead_2", "missingindicator_p_vector mean lead_2", "missingindicator_t_vector mean lead_2", "missingindicator_qrs_ampl mean lead_2", "missingindicator_qrs_vector mean lead_3", "missingindicator_p_vector mean lead_3", "missingindicator_t_vector mean lead_3", "missingindicator_qrs_ampl mean lead_3", "missingindicator_qrs_vector mean lead_4", "missingindicator_p_vector mean lead_4", "missingindicator_t_vector mean lead_4", "missingindicator_qrs_ampl mean lead_4", "missingindicator_qrs_vector mean lead_5", "missingindicator_p_vector mean lead_5", "missingindicator_t_vector mean lead_5", "missingindicator_qrs_ampl mean lead_5", "missingindicator_qrs_vector mean lead_6", "missingindicator_p_vector mean lead_6", "missingindicator_t_vector mean lead_6", "missingindicator_qrs_ampl mean lead_6", "missingindicator_qrs_vector mean lead_7", "missingindicator_p_vector mean lead_7", "missingindicator_t_vector mean lead_7", "missingindicator_qrs_ampl mean lead_7", "missingindicator_PQ_duration mean", "missingindicator_P_duration mean"], "n_classes": 5, "classes": [0, 1, 2, 3, 4]};

        // Set up the dimensions for the diagram
        const margin = {top: 40, right: 90, bottom: 50, left: 90};
        const width = window.innerWidth - margin.left - margin.right;
        const height = window.innerHeight - margin.top - margin.bottom;

        const conditionSymbols = {
            "less_than": "<",
            "less_than_or_equal": "≤",
            "greater_than": ">",
            "greater_than_or_equal": "≥"
        };
        function collapseNodes(d, minSamples) {
            if (d.children) {
                if (d.data.samples < minSamples) {
                    d._children = d.children;
                    d.children = null;
                } else {
                    d.children.forEach(child => collapseNodes(child, minSamples));
                }
            }
        }

        // Add this function to handle the collapse button click
        function handleCollapse() {
            const minSamples = parseInt(prompt("Enter minimum number of samples:", "100"));
            if (isNaN(minSamples)) return;

            collapseNodes(root, minSamples);
            update(root);
            fitToScreen();
        }

        // Add event listener to the collapse button
        d3.select("#collapse-button").on("click", handleCollapse);

        // Helper function to get the symbol for a condition
        function getConditionSymbol(condition) {
            return conditionSymbols[condition] || condition;
        }
        // Create the SVG container
        const svg = d3.select("#tree-container")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom);

        const g = svg.append("g")
            .attr("transform", `translate(${margin.left},${margin.top})`);

        // Add zoom behavior
        const zoom = d3.zoom()
            .scaleExtent([0.1, 4])
            .on("zoom", (event) => {
                g.attr("transform", event.transform);
            });

        svg.call(zoom);

        // Create a tooltip
        const tooltip = d3.select("body").append("div")
            .attr("class", "tooltip")
            .style("opacity", 0);

        function getMaxProba(d) {
            return Math.max(...d.data.probas);
        }

        function getProbaIncrease(d) {
            if (!d.parent) return 0;
            return getMaxProba(d) - getMaxProba(d.parent);
        }

        function getMaxProbaIncrease(d) {
            if (!d.parent) return 0;
            return Math.max(...d.data.probas.map((p, i) => p - d.parent.data.probas[i]));
        }

        // Create a tree layout
        const tree = d3.tree().size([width, height]);

        // Create the root node
        const root = d3.hierarchy(treeData.root);

        // Calculate the maximum number of samples for scaling
        const maxSamples = d3.max(root.descendants(), d => d.data.samples);

        // Calculate the maximum probability in the entire tree
        const rootMaxProba = getMaxProba(root);

        // Create a scale for node radius
        const radiusScale = d3.scaleSqrt()
            .domain([0, maxSamples])
            .range([3, 20]);

        // Create a scale for link thickness
        const linkScale = d3.scaleLinear()
            .domain([0, 1])
            .range([2, 15]);

        // Function to recursively process the tree and set is_custom
        let nodeId = 0;
        root.eachBefore(d => {
            d.id = nodeId++;
            d.x0 = width / 2;
            d.y0 = 0;
        });



        // Collapse the node and all its children
        function collapse(d) {
            if (d.children) {
                d._children = d.children;
                d._children.forEach(collapse);
                d.children = null;
            }
        }

        // Expand a node
        function expand(d) {
            if (d._children) {
                d.children = d._children;
                d._children = null;
            }
            if (d.children) {
                d.children.forEach(expand);
            }
        }

        // Toggle children on click
        function click(event, d) {
            if (d.children) {
                collapse(d);
            } else {
                expand(d);
            }
            update(d);
        }

        // Update the tree
        function update(source) {
            const treeData = tree(root);
            const nodes = treeData.descendants();
            const links = treeData.descendants().slice(1);

            nodes.forEach(d => {
                d.y = d.depth * 180;
            });

            const node = g.selectAll('.node')
                .data(nodes, d => d.id || (d.id = ++nodeId));

            const nodeEnter = node.enter().append('g')
                .attr('class', 'node')
                .attr("transform", d => `translate(${source.x0},${source.y0})`)
                .on('click', (event, d) => {
                    if (d.children) {
                        d._children = d.children;
                        d.children = null;
                    } else {
                        d.children = d._children;
                        d._children = null;
                    }
                    update(d);
                });

            nodeEnter.append('circle')
                .attr('r', 1e-6)
                .style("fill", d => d.data.is_custom ? "green" : "red")  // Color based on is_custom
                .style("stroke", d => d._children ? "lightsteelblue" : "#fff")
                .on("mouseover", function(event, d) {
                let tooltipContent = '';

                if (d.data.feature) {
                    const symbol = getConditionSymbol(d.data.condition);
                    tooltipContent += `<div class="tooltip-row"><span>Feature:</span><span><b>${d.data.feature}</b></span></div>`;
                    tooltipContent += `<div class="tooltip-row"><span>Condition:</span><span><b>${symbol}</b></span></div>`;
                    tooltipContent += `<div class="tooltip-row"><span>Threshold:</span><span><b>${d.data.threshold.toFixed(2)}</b></span></div>`;
                } else {
                    tooltipContent += `<div class="tooltip-row"><span>Node Type:</span><span>Leaf</span></div>`;
                }

                tooltipContent += `<div class="tooltip-row"><span>Samples:</span><span><b>${d.data.samples}</b></span></div>`;
                tooltipContent += `<div class="tooltip-row"><span>Probas:</span><span><b>${d.data.probas.map(p => (p * 100).toFixed(2) + '%').join(', ')}</b></span></div>`;
                tooltipContent += `<div class="tooltip-row"><span>Coverage:</span><span><b>${d.data.coverage.map(c => (c * 100).toFixed(2) + '%').join(', ')}</b></span></div>`;
                tooltipContent += `<div class="tooltip-row"><span>Custom:</span><span><b>${d.data.is_custom ? "Yes" : "No"}</b></span></div>`;

                tooltip.transition().duration(200).style("opacity", .9);
                tooltip.html(tooltipContent)
                  .style("left", (event.pageX + 10) + "px")
                  .style("top", (event.pageY - 28) + "px");
            })
            .on("mouseout", () => tooltip.transition().duration(300).style("opacity", 0));

            nodeEnter.append('text')
            .attr("dy", ".35em")
            .attr("font-weight", 700)
            .attr("x", d => d.children || d._children ? -13 : 13)
            .attr("text-anchor", d => d.children || d._children ? "end" : "start")
            .text(d => {
                if (d.data.feature) {
                    const symbol = getConditionSymbol(d.data.condition);
                    return `${d.data.feature} ${symbol} ${d.data.threshold.toFixed(2)}`;
                } else {
                    return `${d.data.samples}`;
                }
            }).attr("transform", "rotate(-20)");

            const nodeUpdate = nodeEnter.merge(node);

            nodeEnter.on("mouseover", (event, d) => {
                let tooltipContent = d.data.feature
                    ? `<div class="tooltip-row"><span>Feature:</span><span><b>${d.data.feature}</b></span></div>
<br><div class="tooltip-row"><span>Condition:</span><span><b>${d.data.condition}</b></span></div>
<br><div class="tooltip-row"><span>Threshold:</span><span><b>${d.data.threshold.toFixed(2)}</b></span></div>`
                    : `Leaf Node`;

                tooltipContent += `<br><div class="tooltip-row"><span>Samples:</span><span><b>${d.data.samples} (${Math.round(100*d.data.samples/maxSamples,2)}%)</b></span></div>`;

                tooltipContent += `<br><div class="tooltip-table">`
                tooltipContent += `<div class="tooltip-table-row"><div class="tooltip-table-cell"><b>Classes</b></div>${d.data.targets.map(p => '<div class="tooltip-table-cell"><b>' + p + '</b></div>').join('')}</div>`;
                tooltipContent += `<div class="tooltip-table-row"><div class="tooltip-table-cell"><b>Probas</b></div>${d.data.probas.map(p => '<div class="tooltip-table-cell">' +(p * 100).toFixed(2) + '%</div>').join('')}</div>`;
                tooltipContent += `<div class="tooltip-table-row"><div class="tooltip-table-cell"><b>Coverage</b></div>${d.data.coverage.map(p => '<div class="tooltip-table-cell">' + (p * 100).toFixed(2) + '%</div>').join('')}</div>`;
                tooltipContent += `</div>`

                tooltip.transition()
                    .duration(200)
                    .style("opacity", .9);
                tooltip.html(tooltipContent)
                    .style("left", (event.pageX + 28) + "px")
                    .style("top", (event.pageY - 28) + "px");
            })
            .on("mouseout", d => {
                tooltip.transition()
                    .duration(500)
                    .style("opacity", 0);
            });

            nodeUpdate.transition()
                .duration(750)
                .attr("transform", d => `translate(${d.x},${d.y})`);

            nodeUpdate.select('circle')
                .attr('r', d => radiusScale(d.data.samples))
                .style("fill", d => d.data.is_custom ? "green" : "red")  // Color based on is_custom
                .style("stroke", d => d._children ? "lightsteelblue" : "#fff")
                .attr('cursor', 'pointer');

            nodeUpdate.select('circle.node')
                .attr('r', 10)
                .style("fill", d => d.data.feature ? "#fff" : colorScale(d.data.probas[1]))
                .attr('cursor', 'pointer');

            const nodeExit = node.exit().transition()
                .duration(750)
                .attr("transform", d => `translate(${source.x},${source.y})`)
                .remove();

            nodeExit.select('circle').attr('r', 1e-6);
            nodeExit.select('text').style('fill-opacity', 1e-6);

            const link = g.selectAll('path.link')
                .data(links, d => d.id);


            const linkEnter = link.enter().insert('path', "g")
                .attr("class", "link")
                .attr('d', d => {
                    const o = {x: source.x0, y: source.y0};
                    return diagonal(o, o);
                })
                .style("stroke-width", d => linkScale(getMaxProbaIncrease(d)));

            const linkUpdate = linkEnter.merge(link);


            linkUpdate.transition()
                .duration(750)
                .attr('d', d => diagonal(d, d.parent))
                .style("stroke-width", d => linkScale(getMaxProbaIncrease(d)));

            link.exit().transition()
                .duration(750)
                .attr('d', d => {
                    const o = {x: source.x, y: source.y};
                    return diagonal(o, o);
                })
                .remove();

            nodes.forEach(d => {
                d.x0 = d.x;
                d.y0 = d.y;
            });

            function diagonal(s, d) {
                return `M ${s.x} ${s.y}
                        C ${s.x} ${(s.y + d.y) / 2},
                          ${d.x} ${(s.y + d.y) / 2},
                          ${d.x} ${d.y}`;
            }
        }

        update(root);

        // Fit to screen function
        function fitToScreen() {
            const bounds = g.node().getBBox();
            const fullWidth = width + margin.left + margin.right;
            const fullHeight = height + margin.top + margin.bottom;
            const scale = 0.95 / Math.max(bounds.width / fullWidth, bounds.height / fullHeight);
            const translate = [
                fullWidth / 2 - scale * (bounds.x + bounds.width / 2),
                fullHeight / 2 - scale * (bounds.y + bounds.height / 2)
            ];

            svg.transition().duration(750).call(
                zoom.transform,
                d3.zoomIdentity.translate(translate[0], translate[1]).scale(scale)
            );
        }

        // Unfold all branches function
        function unfoldAll() {
            expand(root);
            update(root);
            fitToScreen();
        }

        // Add event listener to the fit button
        d3.select("#fit-button").on("click", fitToScreen);

        // Add event listener to the unfold all button
        d3.select("#unfold-all-button").on("click", unfoldAll);

        // Initial fit to screen
        fitToScreen();
    </script>
</body>
</html>